<!DOCTYPE html>
<html>
<head>
    <title>Temperature Predictions</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>Temperature Predictions</h1>
    <ul>
        {% for month, temperature in predictions.items() %}
            <li>Month {{ month }}: {{ temperature }}Â°C</li>
        {% endfor %}
    </ul>

    <canvas id="PredictionsChart"></canvas>
    <select id="month">
        <option value="1">January</option>
        <option value="2">February</option>
        <option value="3">March</option>
        <option value="4">April</option>
        <option value="5">May</option>
        <option value="6">June</option>
        <option value="7">July</option>
        <option value="8">August</option>
        <option value="9">September</option>
        <option value="10">October</option>
        <option value="11">November</option>
        <option value="12">December</option>
    </select>
    <button id="submit" onclick="updateURL()">Submit</button>
</body>

<script>
    
    var labels = {{ labels|tojson }};
    var values = {{ values|tojson }};

        var ctx = document.getElementById('PredictionsChart').getContext('2d');
        var PredictionsChart = new Chart(ctx, {
            type: 'bar',
            data: {
            labels: labels,
            datasets: [{
                label: 'Temperature Predictions',
                data: values,
                backgroundColor: [ 'rgba(9, 38, 53, 1)', 'rgba(27, 66, 66, 1)', 'rgba(92, 131, 116, 1)', 'rgba(158, 200, 185, 1)'],
                borderColor: ['rgba(0,0,0,0.5)'],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
        function updateFilters() {
        var temp = document.getElementById('temp').value;
        var month = document.getElementById('month').value;
        fetchData(year, month);
    }

        function fetchData(year, month) {
        fetch(`/temperature-predictions/${month}`)
        .then(response => response.json())
        .then(data => {
            if (PredictionsChart) { // Check if the chart instance already exists
                updateChart(data); // Update the existing chart
            }
        });
}
        function updateChart(data) {
        PredictionsChart.data.labels = ['Month'];
        PredictionsChart.data.datasets = [{
        label: 'Months',
        data: [month],
        backgroundColor: [
            'rgba(9, 38, 53, 1)',
            'rgba(27, 66, 66, 1)',
            'rgba(92, 131, 116, 1)',
            'rgba(158, 200, 185, 1)',
        ],
        borderColor: [
            'rgba(0,0,0,0.5)'
        ],
        borderWidth: 1
    }];
    weatherChart.update();
}
function updateURL() {
    var temp = document.getElementById('temp').value;
    var month = document.getElementById('month').value;
    window.location.href = `/temperature-predictions/${month}`;
}
  </script>
</html>
